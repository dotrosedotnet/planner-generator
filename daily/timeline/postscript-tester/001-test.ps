%!PS
%%BoundingBox: 0 0 297 420
%%Pages: 1
%%Page: 1 1

%TODO: implement max-width, based on a variable called 'minimum-left-margin'. this will allow us to implement centering, I think. The grid-width needs to be calculated after margins are taken into account. eventually line dashes will need to be calculated by cell-height

/mm {72 mul 25.4 div} def

% page dimensions
/page-height 420 def % same as BoundingBox
/page-width 297 def % same as BoundingBox

% line features
/linewidth 0.8 def
[0.01 3] 0 setdash

% timeline hours and hour markings
/hours 26 def
/hour-marking-frequency 3 def
/squares-per-hour 1 def
/first-hour 2 def
/first-hour-marking 3 def

% cell dimensions
/cell-height 3.5 mm def
/cell-width 3.5 mm def

% grid placement on page
/grid-upper-margin-size 10 def
/grid-upper-margin {page-height grid-upper-margin-size sub} def
/grid-height {
  cell-height hours squares-per-hour mul mul
} def
/grid-bottom {
  grid-upper-margin grid-height sub
} def
/squares-wide { % how many squares can fit horizontally on the page
  page-width cell-width div cvi
} def
/grid-width {
  squares-wide cell-width mul
}
/max-width 0 def % if max-width is set to 1, side-margin is set to minimum-side-margin
/center 0 def % set to 1 to center grid
/side-margin-total-maximum {
  page-width grid-width sub
}
/grid-left-margin-size 10 def
/grid-left-margin-size-for-centering {
  side-margin-total-maximum 2 div
} def
/grid-left-margin {
  center 1 eq
  {
    grid-left-margin-size-for-centering
  }
  {
    grid-left-margin-size
  }
  ifelse
} def


% let's draw
/first-vertical-line {
  newpath
  grid-left-margin grid-upper-margin moveto
  grid-left-margin grid-bottom lineto
  linewidth setlinewidth 1 setlinecap
  stroke
} def
first-vertical-line

% draw the rest of the vertical lines
/vertical-line-x grid-left-margin cell-width add def
vertical-line-x cell-width page-width {
  newpath
  vertical-line-x grid-upper-margin moveto
  vertical-line-x grid-bottom lineto
  stroke
  /vertical-line-x vertical-line-x cell-width add def
} for
showpage
%%EOF
